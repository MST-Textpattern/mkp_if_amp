# Name: mkp_if_amp v1.0 
# Type: Public plugin
# A Textpattern Conditional Plugin for Google's Accelerated Mobile Pages Project (AMP) 
# Author: Michael K Pate
# URL: https://github.com/michaelkpate/
# Recommended load order: 5

# .....................................................................
# This is a plugin for Textpattern CMS - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the 'Install plugin' box:
# .....................................................................

YToxMTp7czo0OiJuYW1lIjtzOjEwOiJta3BfaWZfYW1wIjtzOjY6ImF1dGhvciI7czoxNDoi
TWljaGFlbCBLIFBhdGUiO3M6MTA6ImF1dGhvcl91cmkiO3M6MzI6Imh0dHBzOi8vZ2l0aHVi
LmNvbS9taWNoYWVsa3BhdGUvIjtzOjc6InZlcnNpb24iO3M6MzoiMS4wIjtzOjExOiJkZXNj
cmlwdGlvbiI7czo4NToiQSBUZXh0cGF0dGVybiBDb25kaXRpb25hbCBQbHVnaW4gZm9yIEdv
b2dsZSdzIEFjY2VsZXJhdGVkIE1vYmlsZSBQYWdlcyBQcm9qZWN0IChBTVApICI7czo0OiJj
b2RlIjtzOjYxNDoiLy8gVFhQIDQuNiB0YWcgcmVnaXN0cmF0aW9uDQppZiAoY2xhc3NfZXhp
c3RzKCdUZXh0cGF0dGVybl9UYWdfUmVnaXN0cnknKSkgew0KCVR4cDo6Z2V0KCdUZXh0cGF0
dGVybl9UYWdfUmVnaXN0cnknKQ0KCQktPnJlZ2lzdGVyKCdhZGlfaWZfYW1wJykNCgk7DQp9
DQoNCmZ1bmN0aW9uIG1rcF9pZl9hbXAoJGF0dHMsICR0aGluZz0nJykNCnsNCg0KCWdsb2Jh
bCAkdmFyaWFibGU7DQoNCgkvLyBwcmVnX3JlcGxhY2UoInxeaHR0cHM/Oi8vW14vXSt8aSIs
ICIiLCBzZXJ2ZXJTZXQoJ1JFUVVFU1RfVVJJJykpIHdhcyBjb3BpZWQgZnJvbSB0aGUgZnVu
Y3Rpb24gcHJlVGV4dCBpbiBwdWJsaXNoLnBocA0KDQoJJHBhcnRzID0gZXhwbG9kZSgnLycs
IHByZWdfcmVwbGFjZSgifF5odHRwcz86Ly9bXi9dK3xpIiwgIiIsIHNlcnZlclNldCgnUkVR
VUVTVF9VUkknKSksIDUpOw0KDQoJLy8gaWYgdGhlIHVybCBlbmRzIGluICdhbXAnIHRoaXMg
d2lsbCByZXR1cm4gdHJ1ZTsgb3RoZXJ3aXNlIGZhbHNlDQoJIA0KCXJldHVybiAoZW5kKCRw
YXJ0cykgPT0gJ2FtcCcpID8gcGFyc2UoRXZhbEVsc2UoJHRoaW5nLCB0cnVlKSkgOiBwYXJz
ZShFdmFsRWxzZSgkdGhpbmcsIGZhbHNlKSk7DQp9DQoiO3M6NDoidHlwZSI7czoxOiIwIjtz
OjU6Im9yZGVyIjtzOjE6IjUiO3M6NToiZmxhZ3MiO3M6MToiMCI7czo0OiJoZWxwIjtzOjE5
MDk6IjxoMT5ta3BfaWZfYW1wPC9oMT4KCgk8cD5UaGlzIGNvbmRpdGlvbmFsIHRhZyBleGFt
aW5lcyB0aGUgdXJsIG9mIHRoZSBjdXJyZW50IHBhZ2UgYW5kIGRldGVybWluZXMgaWYgdGhl
IHVybCBlbmRzIGluICdhbXAuJyBUaGlzIGFsbG93cyBmb3IgYSBjdXN0b20gcGFnZSB0byBi
ZSByZW5kZXJlZCB1c2luZyB0aGUgc3RhbmRhcmRzIGZvciBHb29nbGUncyBBY2NlbGVyYXRl
ZCBNb2JpbGUgUGFnZXMgUHJvamVjdC48L3A+CgoJPGgyPkFja25vd2xlZGdlbWVudHM8L2gy
PgoKCTxwPlRoZXJlIHdhcyBhbiBlYXJsaWVyIHZlcnNpb24gb2YgdGhpcyBwbHVnaW4gY2Fs
bGVkIG1rcF9hcmNoaXZlcyB0aGF0IEkgbG9zdCB3aGVuIHRoZSBUZXh0ZHJpdmUgaG9zdGlu
ZyBzZXJ2aWNlIHdlbnQgZG93bi4gQnV0IEkgdGhpbmsgdGhpcyBvbmUgaXMgYWN0dWFsbHkg
YW4gaW1wcm92ZW1lbnQgYW55d2F5LiBBbHNvIHRoYW5rcyB0byA8YSBocmVmPSJodHRwOi8v
d3d3LmdyZWF0b2NlYW5tZWRpYS5jb20uYXUvdHhwLz9wbHVnaW49YWRpX2dwcyI+YWRpX2dw
czwvYT4gYW5kIDxhIGhyZWY9Imh0dHA6Ly9zdGVmZGF3c29uLmNvbS9zdy9wbHVnaW5zL3Nt
ZF9pZiI+c21kX2lmPC9hPiBmb3Igc29tZSBkZWZpbml0ZSBpbnNwaXJhdGlvbi48L3A+CgoJ
PGgyPkxpbmtzPC9oMj4KCgk8dWw+CgkJPGxpPjxhIGhyZWY9Imh0dHBzOi8vZ2l0aHViLmNv
bS9taWNoYWVsa3BhdGUvbWtwX2lmX2FtcCI+R2l0aHViIENvZGUgUmVwb3NpdG9yeTwvYT48
L2xpPgoJCTxsaT48YSBocmVmPSJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20v
bWljaGFlbGtwYXRlL21rcF9pZl9hbXAvbWFzdGVyL21rcF9pZl9hbXAudHh0Ij5Eb3dubG9h
ZDwvYT48L2xpPgoJCTxsaT48YSBocmVmPSJodHRwOi8vYW1wZGVtby5jbXNzdHlsZXMuY29t
LyI+RGVtbyBTaXRlPC9hPjwvbGk+Cgk8L3VsPgoKCTxoMj5ta3BfaWZfYW1wPC9oMj4KCgk8
cD5KdXN0IHVzZSAmbHQ7dHhwOm1rcF91cmxfcGFyYW1ldGVycyAvJmd0OyBhdCB0aGUgdG9w
IG9mIGEgcGFnZSBvciBmb3JtIHdoZXJlIHlvdSBuZWVkIHRvIGNhcHR1cmUgPHNwYW4gY2xh
c3M9ImNhcHMiPlVSTDwvc3Bhbj4gaW5mb3JtYXRpb24uIEZvciBhIGJldHRlciBleHBsYW5h
dGlvbiwgeW91IHdpbGwgd2FudCB0byB2aXNpdCB0aGUgRGVtbyBTaXRlLjwvcD4KCgk8aDM+
QXR0cmlidXRlczwvaDM+CgoJPGg0Pk5vbmU8L2g0PgoKCTxoMz5FeGFtcGxlczwvaDM+CgpZ
b3Ugd2lsbCB3YW50IHNvbWUgY29kZSBzaW1pbGFyIHRvIHRoaXMgaW4geW91ciBpbmRpdmlk
dWFsIGFydGljbGUgdGVtcGxhdGUgaGVhZGVyIHNvIHRoYXQgdGhlIGFtcCBwYWdlIGNhbiBi
ZSBwcm9wZXJseSBkZXRlY3RlZC4KCjxwcmU+PGNvZGU+Cjx0eHA6aWZfaW5kaXZpZHVhbF9h
cnRpY2xlPgogPGxpbmsgcmVsPSJjYW5vbmljYWwiIGhyZWY9Ijx0eHA6cGVybWxpbmsgLz4i
PgogIDxsaW5rIHJlbD0iYW1waHRtbCIgaHJlZj0iPHR4cDpwZXJtbGluayAvPi9hbXAvIj4K
PC90eHA6aWZfaW5kaXZpZHVhbF9hcnRpY2xlPgo8L2NvZGU+PC9wcmU+CgpZb3Ugd2lsbCB3
YW50IHNvbWV0aGluZyBzaW1pbGFyIHRvIHRoaXMgaW4geW91ciBpbmRpdmlkdWFsIGFydGlj
bGUgdGVtcGxhdGUgdG8gZGlzcGxheSB0aGUgYWx0ZXJuYXRpdmUgZm9ybWF0dGluZy4KPHBy
ZT48Y29kZT4KPHR4cDpta3BfaWZfYW1wPgo8dHhwOm91dHB1dF9mb3JtIGZvcm09ImxheW91
dF9hcmNoaXZlc19hbXAiIC8+Cjx0eHA6ZWxzZSAvPgo8dHhwOm91dHB1dF9mb3JtIGZvcm09
ImxheW91dF9hcmNoaXZlc19zdGFuZGFyZCIgLz4KPC90eHA6X21rcF9pZl9hbXA+CjwvY29k
ZT48L3ByZT4KCgk8aDM+UmVsZWFzZSBIaXN0b3J5PC9oMz4KCgk8cD5WZXJzaW9uIDEuMDog
RmVicnVhcnkgMjZ0aCwgMjAxNjwvcD4iO3M6MzoibWQ1IjtzOjMyOiJkNmQxYmEyMTMxNzgy
Yjc3M2E1MjgyY2Y0YmEyZjgxZCI7fQ==
